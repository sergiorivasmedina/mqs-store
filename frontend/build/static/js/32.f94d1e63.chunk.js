(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[32],{1244:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(1076),r=a(1077),s=a(1078),l=a(1079),o=a(1080),d=a(1029),j=a(1026),b=a(172),p=a(470),u=a(979),h=a(1017),m=a(1122),O=a(1121),x=a(1215),g=a(1119),f=a(1085),v=a(991),C=a(1065),k=a(38),y=a(963),S=a(1259),w=a(472),B=a(1027),A=a(1095),N=a.n(A),_=a(1096),I=a.n(_),F=a(1094),J=a.n(F),M=a(1);var D=function(e){let{endpoint:t,photos:a,description:i}=e;const c="Imagen para mostrar de marca: ".concat(i),r=Object(k.a)(),[s,l]=Object(n.useState)(0),o=a.length;return Object(M.jsxs)(y.a,{sx:{maxWidth:400,flexGrow:1},children:[Object(M.jsx)(w.a,{square:!0,elevation:0,sx:{display:"flex",alignItems:"center",height:50,pl:2,bgcolor:"background.default"},children:Object(M.jsx)(B.a,{children:c})}),Object(M.jsx)(J.a,{axis:"rtl"===r.direction?"x-reverse":"x",index:s,onChangeIndex:e=>{l(e)},enableMouseEvents:!0,children:a.map(((e,a)=>Object(M.jsx)("div",{children:Math.abs(s-a)<=2?Object(M.jsx)(y.a,{component:"img",sx:{maxHeight:300,display:"block",maxWidth:800,overflow:"hidden"},src:t+e.replace("/","%2F"),alt:t+e.replace("/","%2F")}):null},t+e.replace("/","%2F"))))}),Object(M.jsx)(S.a,{steps:o,position:"static",activeStep:s,nextButton:Object(M.jsxs)(u.a,{size:"small",onClick:()=>{l((e=>e+1))},disabled:s===o-1,children:["Next","rtl"===r.direction?Object(M.jsx)(N.a,{}):Object(M.jsx)(I.a,{})]}),backButton:Object(M.jsxs)(u.a,{size:"small",onClick:()=>{l((e=>e-1))},disabled:0===s,children:["rtl"===r.direction?Object(M.jsx)(I.a,{}):Object(M.jsx)(N.a,{}),"Back"]})})]})},T=a(141);const E=Object(b.a)(c.a)((e=>{let{theme:t}=e;return{whiteSpace:"pre","& thead":{"& tr":{"& th":{paddingLeft:0,paddingRight:0}}},"& tbody":{"& tr":{"& td":{paddingLeft:0,textTransform:"capitalize"}}}}})),z=i.a.forwardRef((function(e,t){return Object(M.jsx)(f.a,{direction:"up",ref:t,...e})})),P=Object(b.a)(v.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),R=Object(b.a)(C.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),q=Object(b.a)(u.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),G=Object(b.a)("div")((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[t.breakpoints.down("sm")]:{marginBottom:"16px"}},"& .button":{margin:t.spacing(1)},"& .input":{display:"none"}}})),L=Object(b.a)("div")((()=>({display:"flex",flexDirection:"row",justifyContent:"left",alignItems:"center"})));var W=e=>{let{brands:t,setBrands:a}=e;const[i,c]=Object(n.useState)(!1),[b,f]=Object(n.useState)(!0),[v,C]=Object(n.useState)("Activo"),[k,y]=Object(n.useState)(""),[S,w]=Object(n.useState)(null),[B,A]=Object(n.useState)([]),[N,_]=Object(n.useState)([]),[I,F]=Object(n.useState)([]),J="http://3.82.209.241:8080/api/v1/images/",[W,H]=Object(n.useState)(J),[K,Q]=Object(n.useState)(!1),U={photos:[],description:null,status:null},[V,X]=Object(n.useState)(U);function Y(){y(""),w(null),A([]),_([]),F([]),c(!1)}function Z(e){console.log(e),y(e.description),f(e.status);let t=e.status?"Activo":"Inactivo";C(t),w(e),function(e){let t=[];e.photos.forEach((e=>{t.push({name:e.replace("brands/","")})})),A(t)}(e),c(!0)}function $(){const e=new FormData;e.append("description",k),e.append("status",b?1:0);for(let t of N)e.append("productPicture",t);e.append("deletedPictures",JSON.stringify(I)),T.a.put("/api/v2/brand/"+S._id,e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{const n={_id:e.data._id,description:e.data.description,status:e.data.status,photos:e.data.photos};let i=t.findIndex((e=>e._id===S._id)),c=t.slice();c[i]=n,a(c)})),Y()}function ee(e){y(e.target.value)}const te=e=>{console.log(e.target.files),A([...B,...e.target.files]),_([...N,...e.target.files])};function ae(){X(U),Q(!1)}return Object(M.jsx)(p.a,{width:"100%",overflow:"auto",children:Object(M.jsxs)(E,{children:[Object(M.jsx)(r.a,{children:Object(M.jsxs)(s.a,{children:[Object(M.jsx)(l.a,{children:"Nombre"}),Object(M.jsx)(l.a,{children:"Estado"}),Object(M.jsx)(l.a,{children:"Acci\xf3n"})]})}),Object(M.jsx)(o.a,{children:t&&t.map(((e,n)=>{return Object(M.jsxs)(s.a,{children:[Object(M.jsx)(l.a,{align:"left",children:e.description}),Object(M.jsx)(l.a,{children:(c=e.status,1===c?"Activo":0===c?"Inactivo":"Estado desconocido")}),Object(M.jsxs)(l.a,{children:[e.photos.length>0?Object(M.jsx)(d.a,{onClick:()=>function(e){let t=JSON.parse(JSON.stringify(e));0===e.photos.length?(t.photos.push(""),H("http://3.82.209.241:3000/assets/images/mqs/image_not_available.png")):H(J),X(t),Q(!0)}(e),children:Object(M.jsx)(j.a,{color:"primary",children:"image"})}):null,Object(M.jsx)(d.a,{onClick:()=>Z(e),children:Object(M.jsx)(j.a,{color:"secondary",children:"edit"})}),Object(M.jsx)(d.a,{onClick:()=>function(e){T.a.delete("/api/v1/brand/"+e._id).then((n=>{console.info("Se elimin\xf3 marca: ".concat(JSON.stringify(n.data)));let i=t.slice();i=i.filter((t=>t._id!==e._id)),a(i),ae()})).catch((e=>{console.log(e),412===e.response.status&&alert(JSON.stringify(e.response.data.message))}))}(e),children:Object(M.jsx)(j.a,{color:"delete",children:"delete"})})]}),Object(M.jsxs)(h.a,{open:i,TransitionComponent:z,keepMounted:!0,onClose:Y,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(M.jsx)(x.a,{id:"alert-dialog-slide-title",children:"Modificar marca"}),Object(M.jsxs)(O.a,{children:[Object(M.jsx)(P,{id:"outlined-basic",label:"Nombre",variant:"outlined",value:k,onChange:ee}),Object(M.jsx)("br",{}),Object(M.jsx)(R,{control:Object(M.jsx)(g.a,{checked:b,onChange:()=>(C(b?"Inactivo":"Activo"),void f(!b)),value:"checkedB",color:"primary"}),label:v}),B.length>0?B.map(((e,t)=>Object(M.jsxs)(L,{children:[Object(M.jsx)(d.a,{className:"button","aria-label":"Delete",color:"error",onClick:()=>function(e){let t=B.slice();t=t.filter((t=>t!==e)),A(t);let a={...e};a.name="brands/"+e.name,F([...I,a]);let n=t.slice();n=n.filter((t=>t!==e)),_(n)}(e),children:Object(M.jsx)(j.a,{children:"clear"})}),Object(M.jsx)("div",{children:e.name},t+e.name)]}))):null,Object(M.jsxs)(G,{children:[Object(M.jsx)("input",{accept:"image/*",className:"input",id:"upload-image-brand-button",multiple:!0,type:"file",onChange:te,onClick:e=>{e.target.value=null}}),B.length>0?Object(M.jsx)("label",{htmlFor:"upload-image-brand-button-disable",children:Object(M.jsx)(q,{component:"span",disabled:!0,children:"Agregar imagen"})}):Object(M.jsx)("label",{htmlFor:"upload-image-brand-button",children:Object(M.jsx)(q,{component:"span",children:"Agregar imagen"})})]})]}),Object(M.jsxs)(m.a,{children:[Object(M.jsx)(u.a,{onClick:Y,color:"secondary",children:"Cancelar"}),Object(M.jsx)(u.a,{onClick:$,color:"primary",children:"Actualizar"})]})]}),Object(M.jsxs)(h.a,{open:K,TransitionComponent:z,keepMounted:!0,onClose:ae,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(M.jsx)(O.a,{children:Object(M.jsx)(D,{endpoint:W,photos:V.photos,description:V.description})}),Object(M.jsx)(m.a,{children:Object(M.jsx)(u.a,{onClick:ae,color:"secondary",children:"Cerrar"})})]})]},n);var c}))})]})})},H=a(114);const K=i.a.forwardRef((function(e,t){return Object(M.jsx)(f.a,{direction:"up",ref:t,...e})})),Q=Object(b.a)(u.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),U=Object(b.a)(v.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),V=Object(b.a)(C.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),X=Object(b.a)("div")((()=>({display:"flex",flexDirection:"row",justifyContent:"left",alignItems:"center"}))),Y=Object(b.a)("div")((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[t.breakpoints.down("sm")]:{marginBottom:"16px"}},"& .button":{margin:t.spacing(1)},"& .input":{display:"none"}}}));function Z(e){let{brands:t,setBrands:a}=e;const[i,c]=Object(n.useState)(!1),[r,s]=Object(n.useState)(!0),[l,o]=Object(n.useState)("Activo"),[b,p]=Object(n.useState)(""),[f,v]=Object(n.useState)([]);function C(){p(""),v([]),c(!1)}return Object(M.jsxs)("div",{children:[Object(M.jsx)(Q,{variant:"contained",color:"primary",onClick:function(){c(!0)},children:"Agregar"}),Object(M.jsxs)(h.a,{open:i,TransitionComponent:K,keepMounted:!0,onClose:C,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(M.jsx)(x.a,{id:"alert-dialog-slide-title",children:"Agregar una nueva marca"}),Object(M.jsxs)(O.a,{children:[Object(M.jsx)(U,{id:"outlined-basic",label:"Nombre",variant:"outlined",value:b,onChange:function(e){p(e.target.value)}}),Object(M.jsx)("br",{}),Object(M.jsx)("br",{}),Object(M.jsx)(V,{control:Object(M.jsx)(g.a,{checked:r,onChange:()=>(o(r?"Inactivo":"Activo"),void s(!r)),value:"checkedB",color:"primary"}),label:l}),f.length?f.map(((e,t)=>Object(M.jsxs)(X,{children:[Object(M.jsx)(d.a,{className:"button","aria-label":"Delete",color:"error",onClick:()=>function(e){let t=f.slice();t=t.filter((t=>t!==e)),v(t)}(e),children:Object(M.jsx)(j.a,{children:"clear"})}),Object(M.jsx)("div",{children:e.name},t)]}))):null,Object(M.jsxs)(Y,{children:[Object(M.jsx)("input",{accept:"image/*",className:"input",id:"upload-new-image-brand-button",multiple:!0,type:"file",onChange:e=>{v([...f,...e.target.files])},onClick:e=>{e.target.value=null}}),f.length>0?Object(M.jsx)("label",{htmlFor:"upload-new-image-brand-button-disable",children:Object(M.jsx)(Q,{component:"span",disabled:!0,children:"Agregar imagen"})}):Object(M.jsx)("label",{htmlFor:"upload-new-image-brand-button",children:Object(M.jsx)(Q,{component:"span",children:"Agregar imagen"})})]})]}),Object(M.jsxs)(m.a,{children:[Object(M.jsx)(u.a,{onClick:C,color:"secondary",children:"Cancelar"}),Object(M.jsx)(u.a,{onClick:function(){if(b.length>0){const e=new FormData;e.append("description",b),e.append("status",r?1:0);for(let t of f)e.append("productPicture",t);T.a.post("/api/v2/brand",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{const n={_id:e.data._id,description:e.data.description,status:e.data.status,photos:e.data.photos};let i=t.slice();i.unshift(n),a(i),C()}))}else console.log("Completear nombre de la marca")},color:"primary",children:"Crear"})]})]})]})}const $=Object(b.a)("div")((e=>{let{theme:t}=e;return{margin:"30px",[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[t.breakpoints.down("sm")]:{marginBottom:"16px"}}}}));t.default=()=>{const[e,t]=Object(n.useState)([]);return Object(n.useEffect)((()=>{T.a.get("/api/v1/brands").then((e=>{t(e.data)}))}),[]),Object(M.jsxs)($,{children:[Object(M.jsx)(Z,{brands:e,setBrands:t}),Object(M.jsx)(H.l,{title:"Gesti\xf3n de Marcas",children:Object(M.jsx)(W,{brands:e,setBrands:t})}),Object(M.jsx)(p.a,{py:"12px"})]})}}}]);