(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[34],{1244:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(1067),o=n(1068),s=n(1069),r=n(1070),l=n(1071),d=n(1029),j=n(1026),b=n(172),p=n(471),u=n(980),O=n(1018),h=n(1083),x=n(1082),m=n(1092),g=n(1066),f=n(1073),v=n(992),C=n(1058),k=n(141),y=n(1);const S=Object(b.a)(i.a)((e=>{let{theme:t}=e;return{whiteSpace:"pre","& thead":{"& tr":{"& th":{paddingLeft:0,paddingRight:0}}},"& tbody":{"& tr":{"& td":{paddingLeft:0,textTransform:"capitalize"}}}}})),A=a.a.forwardRef((function(e,t){return Object(y.jsx)(f.a,{direction:"up",ref:t,...e})})),w=Object(b.a)(v.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),_=Object(b.a)(C.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}}));var I=e=>{let{components:t,setComponents:n}=e;const a={description:"",status:1},[i,b]=Object(c.useState)(!1),[f,v]=Object(c.useState)(!0),[C,I]=Object(c.useState)("Activo"),[N,B]=Object(c.useState)(""),[E,J]=Object(c.useState)(a),[M,T]=Object(c.useState)(!1);function R(){B(""),J(a),b(!1)}function z(){if(N.length>0&&(c=N,(e=E).description!==c.description||e.status!==c.status)){const e={description:N,status:f?1:0};k.a.put("/api/v1/component/"+E._id,e).then((e=>{let c=e.data,a=t.findIndex((e=>e._id===E._id)),i=t.slice();i[a].description=c.description,i[a].status=c.status,n(i)}))}var e,c;J(a),b(!1)}function L(e){B(e.target.value)}function D(){T(!1),R()}function G(){k.a.delete("/api/v1/component/"+E._id).then((e=>{console.info("Se elimin\xf3 componente: ".concat(JSON.stringify(e.data)));let c=t.slice();c=c.filter((e=>e._id!==E._id)),n(c),D()})).catch((e=>{console.log(e),412===e.response.status&&(alert(JSON.stringify(e.response.data.message)),D())}))}return Object(y.jsx)(p.a,{width:"100%",overflow:"auto",children:Object(y.jsxs)(S,{children:[Object(y.jsx)(o.a,{children:Object(y.jsxs)(s.a,{children:[Object(y.jsx)(r.a,{children:"Nombre"}),Object(y.jsx)(r.a,{children:"Estado"}),Object(y.jsx)(r.a,{children:"Acci\xf3n"})]})}),Object(y.jsx)(l.a,{children:t&&t.map(((e,t)=>{return Object(y.jsxs)(s.a,{children:[Object(y.jsx)(r.a,{align:"left",children:e.description}),Object(y.jsx)(r.a,{children:(n=e.status,1===n?"Activo":0===n?"Inactivo":"Estado desconocido")}),Object(y.jsxs)(r.a,{children:[Object(y.jsx)(d.a,{onClick:()=>function(e){B(e.description),v(e.status);let t=e.status?"Activo":"Inactivo";I(t),J(e),b(!0)}(e),children:Object(y.jsx)(j.a,{color:"secondary",children:"edit"})}),Object(y.jsx)(d.a,{onClick:()=>function(e){J(e),T(!0)}(e),children:Object(y.jsx)(j.a,{color:"delete",children:"delete"})})]}),Object(y.jsxs)(O.a,{open:i,TransitionComponent:A,keepMounted:!0,onClose:R,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(y.jsx)(m.a,{id:"alert-dialog-slide-title",children:"Modificar componente"}),Object(y.jsxs)(x.a,{children:[Object(y.jsx)(w,{id:"outlined-basic",label:"Nombre",variant:"outlined",value:N,onChange:L}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)(_,{control:Object(y.jsx)(g.a,{checked:f,onChange:()=>(I(f?"Inactivo":"Activo"),void v(!f)),value:"checkedB",color:"primary"}),label:C})]}),Object(y.jsxs)(h.a,{children:[Object(y.jsx)(u.a,{onClick:R,color:"secondary",children:"Cancelar"}),Object(y.jsx)(u.a,{onClick:z,color:"primary",children:"Actualizar"})]})]}),Object(y.jsxs)(O.a,{open:M,TransitionComponent:A,keepMounted:!0,onClose:D,"aria-labelledby":"alert-dialog-delete","aria-describedby":"alert-dialog-delete-description",children:[Object(y.jsx)(m.a,{id:"alert-dialog-slide-title",children:"Desea eliminar "+E.description+"?"}),Object(y.jsxs)(h.a,{children:[Object(y.jsx)(u.a,{onClick:D,color:"secondary",children:"Cancelar"}),Object(y.jsx)(u.a,{onClick:G,color:"primary",children:"Eliminar"})]})]})]},t);var n}))})]})})},N=n(114);const B=a.a.forwardRef((function(e,t){return Object(y.jsx)(f.a,{direction:"up",ref:t,...e})})),E=Object(b.a)(u.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),J=Object(b.a)(v.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),M=Object(b.a)(C.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}}));function T(e){let{components:t,setComponents:n}=e;const[a,i]=Object(c.useState)(!1),[o,s]=Object(c.useState)(!0),[r,l]=Object(c.useState)("Activo"),[d,j]=Object(c.useState)("");function b(){j(""),i(!1)}return Object(y.jsxs)("div",{children:[Object(y.jsx)(E,{variant:"contained",color:"primary",onClick:function(){i(!0)},children:"Agregar"}),Object(y.jsxs)(O.a,{open:a,TransitionComponent:B,keepMounted:!0,onClose:b,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(y.jsx)(m.a,{id:"alert-dialog-slide-title",children:"Agregar un nuevo componente"}),Object(y.jsxs)(x.a,{children:[Object(y.jsx)(J,{id:"outlined-basic",label:"Nombre",variant:"outlined",value:d,onChange:function(e){j(e.target.value)}}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)(M,{control:Object(y.jsx)(g.a,{checked:o,onChange:()=>(l(o?"Inactivo":"Activo"),void s(!o)),value:"checkedB",color:"primary"}),label:r})]}),Object(y.jsxs)(h.a,{children:[Object(y.jsx)(u.a,{onClick:b,color:"secondary",children:"Cancelar"}),Object(y.jsx)(u.a,{onClick:function(){if(d.length>0){const e={description:d,status:o?1:0};k.a.post("/api/v1/component",e).then((e=>{const c={_id:e.data._id,description:e.data.description,status:e.data.status};let a=t.slice();a.unshift(c),n(a),b()}))}else console.log("Completar nombre del componente")},color:"primary",children:"Crear"})]})]})]})}const R=Object(b.a)("div")((e=>{let{theme:t}=e;return{margin:"30px",[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[t.breakpoints.down("sm")]:{marginBottom:"16px"}}}}));t.default=()=>{const[e,t]=Object(c.useState)([]);return Object(c.useEffect)((()=>{k.a.get("/api/v1/components").then((e=>{t(e.data)}))}),[]),Object(y.jsxs)(R,{children:[Object(y.jsx)(T,{components:e,setComponents:t}),Object(y.jsx)(N.l,{title:"Gesti\xf3n de Componentes",children:Object(y.jsx)(I,{components:e,setComponents:t})}),Object(y.jsx)(p.a,{py:"12px"})]})}}}]);