(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[10],{1238:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(1076),r=a(1077),l=a(1078),o=a(1079),s=a(1080),d=a(1030),j=a(1027),b=a(1241),p=a(172),u=a(471),m=a(980),O=a(1018),h=a(1122),x=a(1121),g=a(1215),f=a(1119),v=a(1085),C=a(992),S=a(1066),y=a(38),k=a(964),N=a(1258),I=a(473),_=a(1028),w=a(1094),B=a.n(w),F=a(1095),A=a.n(F),E=a(1093),M=a.n(E),P=a(1);var T=function(e){let{endpoint:t,photos:a,description:i,price:c,brandName:r,componentName:l}=e;const o=i+" - S/ "+c+" ("+r+", "+l+")",s=Object(y.a)(),[d,j]=Object(n.useState)(0),b=a.length;return Object(P.jsxs)(k.a,{sx:{maxWidth:400,flexGrow:1},children:[Object(P.jsx)(I.a,{square:!0,elevation:0,sx:{display:"flex",alignItems:"center",height:50,pl:2,bgcolor:"background.default"},children:Object(P.jsx)(_.a,{children:o})}),Object(P.jsx)(M.a,{axis:"rtl"===s.direction?"x-reverse":"x",index:d,onChangeIndex:e=>{j(e)},enableMouseEvents:!0,children:a.map(((e,a)=>Object(P.jsx)("div",{children:Math.abs(d-a)<=2?Object(P.jsx)(k.a,{component:"img",sx:{maxHeight:300,display:"block",maxWidth:800,overflow:"hidden"},src:t+e.replace("/","%2F"),alt:t+e.replace("/","%2F")}):null},t+e.replace("/","%2F"))))}),Object(P.jsx)(N.a,{steps:b,position:"static",activeStep:d,nextButton:Object(P.jsxs)(m.a,{size:"small",onClick:()=>{j((e=>e+1))},disabled:d===b-1,children:["Next","rtl"===s.direction?Object(P.jsx)(B.a,{}):Object(P.jsx)(A.a,{})]}),backButton:Object(P.jsxs)(m.a,{size:"small",onClick:()=>{j((e=>e-1))},disabled:0===d,children:["rtl"===s.direction?Object(P.jsx)(A.a,{}):Object(P.jsx)(B.a,{}),"Back"]})})]})},D=a(115);const J=Object(p.a)(c.a)((e=>{let{theme:t}=e;return{whiteSpace:"pre","& thead":{"& tr":{"& th":{paddingLeft:0,paddingRight:0}}},"& tbody":{"& tr":{"& td":{paddingLeft:0,textTransform:"capitalize"}}}}})),L=i.a.forwardRef((function(e,t){return Object(P.jsx)(v.a,{direction:"up",ref:t,...e})})),V=Object(p.a)(C.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),W=Object(p.a)(S.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),q=Object(p.a)(m.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),z=Object(p.a)("div")((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[t.breakpoints.down("sm")]:{marginBottom:"16px"}},"& .button":{margin:t.spacing(1)},"& .input":{display:"none"}}})),R=Object(p.a)("div")((()=>({display:"flex",flexDirection:"row",justifyContent:"left",alignItems:"center"})));var G=e=>{let{items:t,setItems:a}=e;const i={desciption:""},[c,p]=Object(n.useState)(!1),[v,S]=Object(n.useState)(!0),[y,k]=Object(n.useState)("Activo"),[N,I]=Object(n.useState)(""),[_,w]=Object(n.useState)(""),[B,F]=Object(n.useState)(0),[A,E]=Object(n.useState)(i),[M,G]=Object(n.useState)(null),[H,K]=Object(n.useState)(null),[Q,U]=Object(n.useState)([]),[X,Y]=Object(n.useState)([]),[Z,$]=Object(n.useState)([]),ee="http://3.82.209.241:8080/api/v1/images/",[te,ae]=Object(n.useState)(ee),[ne,ie]=Object(n.useState)(!1),ce={photos:[],description:null,price:null,brand:{description:null},component:{description:null}},[re,le]=Object(n.useState)(ce),[oe,se]=Object(n.useState)([]),[de,je]=Object(n.useState)([]),[be,pe]=Object(n.useState)(!1);function ue(){w(""),I(""),F(0),E(i),U([]),Y([]),$([]),p(!1)}function me(e){I(e.partNumber),w(e.description),F(e.price.toFixed(2)),S(e.status),G(e.brand),K(e.component);let t=e.status?"Activo":"Inactivo";k(t),function(e){let t=[];e.photos.forEach((e=>{t.push({name:e.replace("items/","")})})),U(t)}(e),E(e),p(!0)}function Oe(){le(ce),ie(!1)}function he(){const e=new FormData;e.append("partNumber",N),e.append("description",_),e.append("price",B),e.append("idBrand",M._id),e.append("idComponent",H._id),e.append("status",v?1:0);for(let t of X)e.append("productPicture",t);e.append("deletedPictures",JSON.stringify(Z)),D.a.put("/api/v2/component-detail/"+A._id,e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{const n={_id:e.data._id,partNumber:e.data.partNumber,description:e.data.description,price:e.data.price,brand:{_id:e.data.idBrand,description:M.description},component:{_id:e.data.idComponent,description:H.description},status:e.data.status,photos:e.data.photos};let i=t.findIndex((e=>e._id===A._id)),c=t.slice();c[i]=n,a(c)})),ue()}function xe(e){I(e.target.value)}function ge(e){w(e.target.value)}function fe(e){F(e.target.value)}Object(n.useEffect)((()=>{D.a.get("/api/v1/brands").then((e=>{se(e.data)})),D.a.get("/api/v1/components").then((e=>{je(e.data)}))}),[]);const ve=e=>{U([...Q,...e.target.files]),Y([...X,...e.target.files])};function Ce(){pe(!1),E(i)}function Se(){D.a.delete("/api/v1/component-detail/"+A._id).then((e=>{console.info("Se elimin\xf3 item: ".concat(JSON.stringify(e.data)))}));let e=t.slice();e=e.filter((e=>e._id!==A._id)),a(e),Ce()}return Object(P.jsx)(u.a,{width:"100%",overflow:"auto",children:Object(P.jsxs)(J,{children:[Object(P.jsx)(r.a,{children:Object(P.jsxs)(l.a,{children:[Object(P.jsx)(o.a,{children:"Numero de Parte"}),Object(P.jsx)(o.a,{children:"Nombre"}),Object(P.jsx)(o.a,{children:"Precio"}),Object(P.jsx)(o.a,{children:"Marca"}),Object(P.jsx)(o.a,{children:"Componente"}),Object(P.jsx)(o.a,{children:"Estado"}),Object(P.jsx)(o.a,{children:"Acci\xf3n"})]})}),Object(P.jsx)(s.a,{children:t&&t.map(((e,t)=>{return Object(P.jsxs)(l.a,{children:[Object(P.jsx)(o.a,{align:"left",children:e.partNumber}),Object(P.jsx)(o.a,{children:e.description}),Object(P.jsxs)(o.a,{children:["S/ ",e.price.toFixed(2)]}),Object(P.jsx)(o.a,{children:e.brand.description}),Object(P.jsx)(o.a,{children:e.component.description}),Object(P.jsx)(o.a,{children:(a=e.status,1===a?"Activo":0===a?"Inactivo":"Estado desconocido")}),Object(P.jsxs)(o.a,{children:[e.photos.length>0?Object(P.jsx)(d.a,{onClick:()=>function(e){let t=JSON.parse(JSON.stringify(e));0===e.photos.length?(t.photos.push(""),ae("http://3.82.209.241:3000/assets/images/mqs/image_not_available.png")):ae(ee),le(t),ie(!0)}(e),children:Object(P.jsx)(j.a,{color:"primary",children:"image"})}):null,Object(P.jsx)(d.a,{onClick:()=>me(e),children:Object(P.jsx)(j.a,{color:"secondary",children:"edit"})}),Object(P.jsx)(d.a,{onClick:()=>function(e){E(e),pe(!0)}(e),children:Object(P.jsx)(j.a,{color:"delete",children:"delete"})})]}),Object(P.jsxs)(O.a,{open:c,TransitionComponent:L,keepMounted:!0,onClose:ue,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(P.jsx)(g.a,{id:"alert-dialog-slide-title",children:"Modificar item"}),Object(P.jsxs)(x.a,{children:[Object(P.jsx)(V,{id:"outlined-basic",label:"Numero de parte",variant:"outlined",value:N,onChange:xe}),Object(P.jsx)("br",{}),Object(P.jsx)(V,{id:"outlined-basic",label:"Nombre",variant:"outlined",value:_,onChange:ge}),Object(P.jsx)("br",{}),Object(P.jsx)(V,{id:"outlined-basic",label:"Precio",variant:"outlined",value:B,onChange:fe}),Object(P.jsx)("br",{}),Object(P.jsx)(n.Fragment,{children:Object(P.jsx)(b.a,{isOptionEqualToValue:(e,t)=>e.id===t.id,value:M,options:oe,getOptionLabel:e=>e.description,onChange:(e,t)=>{G(t||null)},renderInput:e=>Object(P.jsx)(C.a,{...e,label:"Marca",variant:"outlined",fullWidth:!0})})}),Object(P.jsx)("br",{}),Object(P.jsx)(n.Fragment,{children:Object(P.jsx)(b.a,{isOptionEqualToValue:(e,t)=>e.id===t.id,value:H,options:de,getOptionLabel:e=>e.description,onChange:(e,t)=>{K(t||null)},renderInput:e=>Object(P.jsx)(C.a,{...e,label:"Componente",variant:"outlined",fullWidth:!0})})}),Object(P.jsx)("br",{}),Object(P.jsx)(W,{control:Object(P.jsx)(f.a,{checked:v,onChange:()=>(k(v?"Inactivo":"Activo"),void S(!v)),value:"checkedB",color:"primary"}),label:y}),Q.length>0?Q.map(((e,t)=>Object(P.jsxs)(R,{children:[Object(P.jsx)(d.a,{className:"button","aria-label":"Delete",color:"error",onClick:()=>function(e){let t=Q.slice();t=t.filter((t=>t!==e)),U(t);let a={...e};a.name="items/"+e.name,$([...Z,a]);let n=t.slice();n=n.filter((t=>t!==e)),Y(n)}(e),children:Object(P.jsx)(j.a,{children:"clear"})}),Object(P.jsx)("div",{children:e.name},t+e.name)]}))):null,Object(P.jsxs)(z,{children:[Object(P.jsx)("input",{accept:"image/*",className:"input",id:"upload-image-item-button",multiple:!0,type:"file",onChange:ve,onClick:e=>{e.target.value=null}}),Object(P.jsx)("label",{htmlFor:"upload-image-item-button",children:Object(P.jsx)(q,{component:"span",children:"Agregar imagen"})})]})]}),Object(P.jsxs)(h.a,{children:[Object(P.jsx)(m.a,{onClick:ue,color:"secondary",children:"Cancelar"}),Object(P.jsx)(m.a,{onClick:he,color:"primary",children:"Actualizar"})]})]}),Object(P.jsxs)(O.a,{open:ne,TransitionComponent:L,keepMounted:!0,onClose:Oe,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(P.jsx)(x.a,{children:Object(P.jsx)(T,{endpoint:te,photos:re.photos,description:re.description,price:re.price,brandName:re.brand.description,componentName:re.component.description})}),Object(P.jsx)(h.a,{children:Object(P.jsx)(m.a,{onClick:Oe,color:"secondary",children:"Cerrar"})})]}),Object(P.jsxs)(O.a,{open:be,TransitionComponent:L,keepMounted:!0,onClose:Ce,"aria-labelledby":"alert-dialog-delete","aria-describedby":"alert-dialog-delete-description",children:[Object(P.jsx)(g.a,{id:"alert-dialog-slide-title",children:"Desea eliminar "+A.description+"?"}),Object(P.jsxs)(h.a,{children:[Object(P.jsx)(m.a,{onClick:Ce,color:"secondary",children:"Cancelar"}),Object(P.jsx)(m.a,{onClick:Se,color:"primary",children:"Eliminar"})]})]})]},t);var a}))})]})})},H=a(114);var K=e=>{let{getPath:t,label:a,setInputFormValue:i}=e;const[c,r]=Object(n.useState)([]);return Object(n.useEffect)((()=>{D.a.get(t).then((e=>{r(e.data)}))}),[]),Object(P.jsx)(n.Fragment,{children:Object(P.jsx)(b.a,{options:c,getOptionLabel:e=>e.description,onChange:(e,t)=>{i(t||null)},renderInput:e=>Object(P.jsx)(C.a,{...e,label:a,variant:"outlined",fullWidth:!0})})})};const Q=i.a.forwardRef((function(e,t){return Object(P.jsx)(v.a,{direction:"up",ref:t,...e})})),U=Object(p.a)(m.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),X=Object(p.a)(C.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),Y=Object(p.a)(S.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),Z=Object(p.a)(K)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),$=Object(p.a)("div")((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[t.breakpoints.down("sm")]:{marginBottom:"16px"}},"& .button":{margin:t.spacing(1)},"& .input":{display:"none"}}})),ee=Object(p.a)("div")((()=>({display:"flex",flexDirection:"row",justifyContent:"left",alignItems:"center"})));function te(e){let{items:t,setItems:a}=e;const[i,c]=Object(n.useState)(!1),[r,l]=Object(n.useState)(!0),[o,s]=Object(n.useState)("Activo"),[b,p]=Object(n.useState)(""),[u,v]=Object(n.useState)(""),[C,S]=Object(n.useState)(0),[y,k]=Object(n.useState)(null),[N,I]=Object(n.useState)(null),[_,w]=Object(n.useState)([]);function B(){p(""),v(""),S(0),k(null),I(null),w([]),c(!1)}return Object(P.jsxs)("div",{children:[Object(P.jsx)(U,{variant:"contained",color:"primary",onClick:function(){c(!0)},children:"Agregar"}),Object(P.jsxs)(O.a,{open:i,TransitionComponent:Q,keepMounted:!0,onClose:B,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(P.jsx)(g.a,{id:"alert-dialog-slide-title",children:"Agregar un nuevo item"}),Object(P.jsxs)(x.a,{children:[Object(P.jsx)(X,{id:"outlined-basic",label:"N\xfamero de parte",variant:"outlined",value:u,onChange:function(e){v(e.target.value)}}),Object(P.jsx)("br",{}),Object(P.jsx)(X,{id:"outlined-basic",label:"Nombre",variant:"outlined",value:b,onChange:function(e){p(e.target.value)}}),Object(P.jsx)("br",{}),Object(P.jsx)(X,{id:"outlined-basic",label:"Precio",variant:"outlined",value:C,onChange:function(e){S(e.target.value)}}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)(Z,{getPath:"/api/v1/brands",label:"Marca",setInputFormValue:k}),Object(P.jsx)("br",{}),Object(P.jsx)(Z,{getPath:"/api/v1/components",label:"Componentes",setInputFormValue:I}),Object(P.jsx)("br",{}),Object(P.jsx)(Y,{control:Object(P.jsx)(f.a,{checked:r,onChange:()=>(s(r?"Inactivo":"Activo"),void l(!r)),value:"checkedB",color:"primary"}),label:o}),_.length?_.map(((e,t)=>Object(P.jsxs)(ee,{children:[Object(P.jsx)(d.a,{className:"button","aria-label":"Delete",color:"error",onClick:()=>function(e){let t=_.slice();t=t.filter((t=>t!==e)),w(t)}(e),children:Object(P.jsx)(j.a,{children:"clear"})}),Object(P.jsx)("div",{children:e.name},t)]}))):null,Object(P.jsxs)($,{children:[Object(P.jsx)("input",{accept:"image/*",className:"input",id:"icon-button-file",multiple:!0,type:"file",onChange:e=>{w([..._,...e.target.files])}}),Object(P.jsx)("label",{htmlFor:"icon-button-file",children:Object(P.jsx)(U,{component:"span",children:"Agregar imagen"})})]})]}),Object(P.jsxs)(h.a,{children:[Object(P.jsx)(m.a,{onClick:B,color:"secondary",children:"Cancelar"}),Object(P.jsx)(m.a,{onClick:function(){if(u.length>0&&b.length>0&&!isNaN(C)&&null!==y&&null!==N){const e=new FormData;e.append("partNumber",u),e.append("description",b),e.append("price",C),e.append("idBrand",y._id),e.append("idComponent",N._id),e.append("status",r?1:0);for(let t of _)e.append("productPicture",t);D.a.post("/api/v2/component-detail",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{const n={_id:e.data._id,partNumber:e.data.partNumber,description:e.data.description,price:e.data.price,brand:{_id:e.data.idBrand,description:y.description},component:{_id:e.data.idComponent,description:N.description},status:e.data.status,photos:e.data.photos};let i=t.slice();i.unshift(n),console.log(i),a(i),B()}))}else console.log("Completar nombre del item")},color:"primary",children:"Crear"})]})]})]})}const ae=Object(p.a)("div")((e=>{let{theme:t}=e;return{margin:"30px",[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[t.breakpoints.down("sm")]:{marginBottom:"16px"}}}}));t.default=()=>{const[e,t]=Object(n.useState)([]);return Object(n.useEffect)((()=>{D.a.get("/api/v1/component-details").then((e=>{t(e.data)}))}),[]),Object(P.jsxs)(ae,{children:[Object(P.jsx)(te,{items:e,setItems:t}),Object(P.jsx)(H.m,{title:"Gesti\xf3n de Items",children:Object(P.jsx)(G,{items:e,setItems:t})}),Object(P.jsx)(u.a,{py:"12px"})]})}}}]);