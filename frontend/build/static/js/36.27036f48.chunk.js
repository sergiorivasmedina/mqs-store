(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[36],{1237:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(1077),r=a(1078),l=a(1079),o=a(1080),s=a(1081),d=a(1029),j=a(1026),b=a(1239),p=a(172),u=a(471),O=a(980),h=a(1018),m=a(1083),x=a(1082),g=a(1092),f=a(1066),v=a(1068),C=a(992),S=a(1058),y=a(38),k=a(964),w=a(1255),N=a(473),I=a(1027),_=a(1096),F=a.n(_),B=a(1097),A=a.n(B),E=a(1095),L=a.n(E),P=a(1);var M=function(e){let{endpoint:t,photos:a,description:i,price:c,brandName:r,componentName:l}=e;const o=i+" - S/ "+c+" ("+r+", "+l+")",s=Object(y.a)(),[d,j]=Object(n.useState)(0),b=a.length;return Object(P.jsxs)(k.a,{sx:{maxWidth:400,flexGrow:1},children:[Object(P.jsx)(N.a,{square:!0,elevation:0,sx:{display:"flex",alignItems:"center",height:50,pl:2,bgcolor:"background.default"},children:Object(P.jsx)(I.a,{children:o})}),Object(P.jsx)(L.a,{axis:"rtl"===s.direction?"x-reverse":"x",index:d,onChangeIndex:e=>{j(e)},enableMouseEvents:!0,children:a.map(((e,a)=>Object(P.jsx)("div",{children:Math.abs(d-a)<=2?Object(P.jsx)(k.a,{component:"img",sx:{maxHeight:300,display:"block",maxWidth:800,overflow:"hidden"},src:t+e.replace("/","%2F"),alt:t+e.replace("/","%2F")}):null},t+e.replace("/","%2F"))))}),Object(P.jsx)(w.a,{steps:b,position:"static",activeStep:d,nextButton:Object(P.jsxs)(O.a,{size:"small",onClick:()=>{j((e=>e+1))},disabled:d===b-1,children:["Siguiente","rtl"===s.direction?Object(P.jsx)(F.a,{}):Object(P.jsx)(A.a,{})]}),backButton:Object(P.jsxs)(O.a,{size:"small",onClick:()=>{j((e=>e-1))},disabled:0===d,children:["rtl"===s.direction?Object(P.jsx)(A.a,{}):Object(P.jsx)(F.a,{}),"Anterior"]})})]})},T=a(141);const z=Object(p.a)(c.a)((e=>{let{theme:t}=e;return{whiteSpace:"pre","& thead":{"& tr":{"& th":{paddingLeft:0,paddingRight:0}}},"& tbody":{"& tr":{"& td":{paddingLeft:0,textTransform:"capitalize"}}}}})),D=i.a.forwardRef((function(e,t){return Object(P.jsx)(v.a,{direction:"up",ref:t,...e})})),R=Object(p.a)(C.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),J=Object(p.a)(S.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),V=Object(p.a)(O.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),W=Object(p.a)("div")((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[t.breakpoints.down("sm")]:{marginBottom:"16px"}},"& .button":{margin:t.spacing(1)},"& .input":{display:"none"}}})),q=Object(p.a)("div")((()=>({display:"flex",flexDirection:"row",justifyContent:"left",alignItems:"center"})));var G=e=>{let{items:t,setItems:a}=e;const i={desciption:""},[c,p]=Object(n.useState)(!1),[v,S]=Object(n.useState)(!0),[y,k]=Object(n.useState)("Activo"),[w,N]=Object(n.useState)(""),[I,_]=Object(n.useState)(""),[F,B]=Object(n.useState)(""),[A,E]=Object(n.useState)(0),[L,G]=Object(n.useState)(i),[U,H]=Object(n.useState)(null),[K,Q]=Object(n.useState)(null),[X,Y]=Object(n.useState)([]),[Z,$]=Object(n.useState)([]),[ee,te]=Object(n.useState)([]),ae=T.a.defaults.baseURL+"/api/v1/images/",ne="".concat(T.a.defaults.baseURL.slice(0,-4)).concat(window.location.port,"/assets/images/mqs/image_not_available.png"),[ie,ce]=Object(n.useState)(ae),[re,le]=Object(n.useState)(!1),oe={photos:[],description:null,price:null,brand:{description:null},component:{description:null}},[se,de]=Object(n.useState)(oe),[je,be]=Object(n.useState)([]),[pe,ue]=Object(n.useState)([]),[Oe,he]=Object(n.useState)(!1);function me(){B(""),N(""),_(""),E(0),G(i),Y([]),$([]),te([]),p(!1)}function xe(e){N(e.partNumber),_(e.code),B(e.description),E(e.price.toFixed(2)),S(e.status),H(e.brand),Q(e.component);let t=e.status?"Activo":"Inactivo";k(t),function(e){let t=[];e.photos.forEach((e=>{t.push({name:e.replace("items/","")})})),Y(t)}(e),G(e),p(!0)}function ge(){de(oe),le(!1)}function fe(){const e=new FormData;e.append("partNumber",w),e.append("code",I),e.append("description",F),e.append("price",A),e.append("idBrand",U._id),e.append("idComponent",K._id),e.append("status",v?1:0);for(let t of Z)e.append("productPicture",t);e.append("deletedPictures",JSON.stringify(ee)),T.a.put("/api/v2/component-detail/"+L._id,e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{const n={_id:e.data._id,partNumber:e.data.partNumber,code:e.data.code,description:e.data.description,price:e.data.price,brand:{_id:e.data.idBrand,description:U.description},component:{_id:e.data.idComponent,description:K.description},status:e.data.status,photos:e.data.photos};console.log(n);let i=t.findIndex((e=>e._id===L._id)),c=t.slice();c[i]=n,a(c)})),me()}function ve(e){N(e.target.value)}function Ce(e){_(e.target.value)}function Se(e){B(e.target.value)}function ye(e){E(e.target.value)}Object(n.useEffect)((()=>{T.a.get("/api/v1/brands").then((e=>{be(e.data)})),T.a.get("/api/v1/components").then((e=>{ue(e.data)}))}),[]);const ke=e=>{Y([...X,...e.target.files]),$([...Z,...e.target.files])};function we(){he(!1),G(i)}function Ne(){T.a.delete("/api/v1/component-detail/"+L._id).then((e=>{console.info("Se elimin\xf3 item: ".concat(JSON.stringify(e.data)))}));let e=t.slice();e=e.filter((e=>e._id!==L._id)),a(e),we()}return Object(P.jsx)(u.a,{width:"100%",overflow:"auto",children:Object(P.jsxs)(z,{children:[Object(P.jsx)(r.a,{children:Object(P.jsxs)(l.a,{children:[Object(P.jsx)(o.a,{children:"N\xfamero de Parte"}),Object(P.jsx)(o.a,{children:"C\xf3digo"}),Object(P.jsx)(o.a,{children:"Nombre"}),Object(P.jsx)(o.a,{children:"Precio"}),Object(P.jsx)(o.a,{children:"Marca"}),Object(P.jsx)(o.a,{children:"Componente"}),Object(P.jsx)(o.a,{children:"Estado"}),Object(P.jsx)(o.a,{children:"Acci\xf3n"})]})}),Object(P.jsx)(s.a,{children:t&&t.map(((e,t)=>{return Object(P.jsxs)(l.a,{children:[Object(P.jsx)(o.a,{align:"left",children:e.partNumber}),Object(P.jsx)(o.a,{children:e.code}),Object(P.jsx)(o.a,{children:e.description}),Object(P.jsxs)(o.a,{children:["S/ ",e.price.toFixed(2)]}),Object(P.jsx)(o.a,{children:e.brand.description}),Object(P.jsx)(o.a,{children:e.component.description}),Object(P.jsx)(o.a,{children:(a=e.status,1===a?"Activo":0===a?"Inactivo":"Estado desconocido")}),Object(P.jsxs)(o.a,{children:[e.photos.length>0?Object(P.jsx)(d.a,{onClick:()=>function(e){let t=JSON.parse(JSON.stringify(e));0===e.photos.length?(t.photos.push(""),ce(ne)):ce(ae),de(t),le(!0)}(e),children:Object(P.jsx)(j.a,{color:"primary",children:"image"})}):null,Object(P.jsx)(d.a,{onClick:()=>xe(e),children:Object(P.jsx)(j.a,{color:"secondary",children:"edit"})}),Object(P.jsx)(d.a,{onClick:()=>function(e){G(e),he(!0)}(e),children:Object(P.jsx)(j.a,{color:"delete",children:"delete"})})]}),Object(P.jsxs)(h.a,{open:c,TransitionComponent:D,keepMounted:!0,onClose:me,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(P.jsx)(g.a,{id:"alert-dialog-slide-title",children:"Modificar item"}),Object(P.jsxs)(x.a,{children:[Object(P.jsx)(R,{id:"outlined-basic",label:"N\xfamero de parte",variant:"outlined",value:w,onChange:ve}),Object(P.jsx)("br",{}),Object(P.jsx)(R,{id:"outlined-basic",label:"C\xf3digo",variant:"outlined",value:I,onChange:Ce}),Object(P.jsx)("br",{}),Object(P.jsx)(R,{id:"outlined-basic",label:"Nombre",variant:"outlined",value:F,onChange:Se}),Object(P.jsx)("br",{}),Object(P.jsx)(R,{id:"outlined-basic",label:"Precio",variant:"outlined",value:A,onChange:ye}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)(n.Fragment,{children:Object(P.jsx)(b.a,{isOptionEqualToValue:(e,t)=>e.id===t.id,value:U,options:je,getOptionLabel:e=>e.description,onChange:(e,t)=>{H(t||null)},renderInput:e=>Object(P.jsx)(C.a,{...e,label:"Marca",variant:"outlined",fullWidth:!0})})}),Object(P.jsx)("br",{}),Object(P.jsx)(n.Fragment,{children:Object(P.jsx)(b.a,{isOptionEqualToValue:(e,t)=>e.id===t.id,value:K,options:pe,getOptionLabel:e=>e.description,onChange:(e,t)=>{Q(t||null)},renderInput:e=>Object(P.jsx)(C.a,{...e,label:"Componente",variant:"outlined",fullWidth:!0})})}),Object(P.jsx)("br",{}),Object(P.jsx)(J,{control:Object(P.jsx)(f.a,{checked:v,onChange:()=>(k(v?"Inactivo":"Activo"),void S(!v)),value:"checkedB",color:"primary"}),label:y}),X.length>0?X.map(((e,t)=>Object(P.jsxs)(q,{children:[Object(P.jsx)(d.a,{className:"button","aria-label":"Delete",color:"error",onClick:()=>function(e){let t=X.slice();t=t.filter((t=>t!==e)),Y(t);let a={...e};a.name="items/"+e.name,te([...ee,a]);let n=t.slice();n=n.filter((t=>t!==e)),$(n)}(e),children:Object(P.jsx)(j.a,{children:"clear"})}),Object(P.jsx)("div",{children:e.name},t+e.name)]}))):null,Object(P.jsxs)(W,{children:[Object(P.jsx)("input",{accept:"image/*",className:"input",id:"upload-image-item-button",multiple:!0,type:"file",onChange:ke,onClick:e=>{e.target.value=null}}),Object(P.jsx)("label",{htmlFor:"upload-image-item-button",children:Object(P.jsx)(V,{component:"span",children:"Agregar imagen"})})]})]}),Object(P.jsxs)(m.a,{children:[Object(P.jsx)(O.a,{onClick:me,color:"secondary",children:"Cancelar"}),Object(P.jsx)(O.a,{onClick:fe,color:"primary",children:"Actualizar"})]})]}),Object(P.jsxs)(h.a,{open:re,TransitionComponent:D,keepMounted:!0,onClose:ge,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(P.jsx)(x.a,{children:Object(P.jsx)(M,{endpoint:ie,photos:se.photos,description:se.description,price:se.price,brandName:se.brand.description,componentName:se.component.description})}),Object(P.jsx)(m.a,{children:Object(P.jsx)(O.a,{onClick:ge,color:"secondary",children:"Cerrar"})})]}),Object(P.jsxs)(h.a,{open:Oe,TransitionComponent:D,keepMounted:!0,onClose:we,"aria-labelledby":"alert-dialog-delete","aria-describedby":"alert-dialog-delete-description",children:[Object(P.jsx)(g.a,{id:"alert-dialog-slide-title",children:"Desea eliminar "+L.description+"?"}),Object(P.jsxs)(m.a,{children:[Object(P.jsx)(O.a,{onClick:we,color:"secondary",children:"Cancelar"}),Object(P.jsx)(O.a,{onClick:Ne,color:"primary",children:"Eliminar"})]})]})]},t);var a}))})]})})},U=a(114),H=a(957);var K=e=>{let{getPath:t,label:a,setInputFormValue:i,value:c}=e;const[r,l]=Object(n.useState)([]),[o,s]=Object(n.useState)("");return Object(n.useEffect)((()=>{T.a.get(t).then((e=>{l(e.data)}))}),[]),Object(n.useEffect)((()=>{s(null==c?{description:""}:c)}),[c]),Object(P.jsx)(n.Fragment,{children:Object(P.jsx)(b.a,{options:r,getOptionLabel:e=>e.description,value:o,onChange:(e,t)=>{i(t)},renderInput:e=>Object(P.jsx)(C.a,{...e,label:a,variant:"outlined",fullWidth:!0})})})};const Q=i.a.forwardRef((function(e,t){return Object(P.jsx)(v.a,{direction:"up",ref:t,...e})})),X=Object(p.a)(O.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),Y=Object(p.a)(C.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),Z=Object(p.a)(S.a)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),$=Object(p.a)(K)((e=>{let{theme:t}=e;return{margin:t.spacing(1)}})),ee=Object(p.a)("div")((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[t.breakpoints.down("sm")]:{marginBottom:"16px"}},"& .button":{margin:t.spacing(1)},"& .input":{display:"none"}}})),te=Object(p.a)("div")((()=>({display:"flex",flexDirection:"row",justifyContent:"left",alignItems:"center"})));function ae(e){let{items:t,setItems:a}=e;const[i,c]=Object(n.useState)(!1),[r,l]=Object(n.useState)(!0),[o,s]=Object(n.useState)("Activo"),[b,p]=Object(n.useState)(""),[u,v]=Object(n.useState)(""),[C,S]=Object(n.useState)(""),[y,k]=Object(n.useState)(0),[w,N]=Object(n.useState)(null),[I,_]=Object(n.useState)(null),[F,B]=Object(n.useState)([]),[A,E]=Object(n.useState)(""),[L,M]=Object(n.useState)("");function z(){p(""),v(""),S(""),k(0),E(""),M(""),N(null),_(null),B([]),c(!1)}return Object(P.jsxs)("div",{children:[Object(P.jsx)(X,{variant:"contained",color:"primary",onClick:function(){c(!0)},children:"Agregar"}),Object(P.jsxs)(h.a,{open:i,TransitionComponent:Q,keepMounted:!0,onClose:z,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(P.jsx)(g.a,{id:"alert-dialog-slide-title",children:"Agregar un nuevo item"}),Object(P.jsxs)(x.a,{children:[Object(P.jsx)(Y,{id:"outlined-basic",label:"N\xfamero de parte",variant:"outlined",value:u,onChange:function(e){v(e.target.value)}}),Object(P.jsx)("br",{}),Object(P.jsx)(Y,{id:"outlined-basic",label:"C\xf3digo",variant:"outlined",value:C,onChange:function(e){S(e.target.value)}}),Object(P.jsx)("br",{}),Object(P.jsx)(Y,{id:"outlined-basic",label:"Nombre",variant:"outlined",value:b,onChange:function(e){p(e.target.value)}}),Object(P.jsx)("br",{}),Object(P.jsx)(Y,{id:"outlined-basic",label:"Precio",variant:"outlined",value:y,onChange:function(e){k(e.target.value)}}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)($,{getPath:"/api/v1/brands",label:"Marca",setInputFormValue:N,value:w}),Object(P.jsx)("br",{}),Object(P.jsx)($,{getPath:"/api/v1/components",label:"Componentes",setInputFormValue:_,value:I}),Object(P.jsx)("br",{}),Object(P.jsx)(Z,{control:Object(P.jsx)(f.a,{checked:r,onChange:()=>(s(r?"Inactivo":"Activo"),void l(!r)),value:"checkedB",color:"primary"}),label:o}),F.length?F.map(((e,t)=>Object(P.jsxs)(te,{children:[Object(P.jsx)(d.a,{className:"button","aria-label":"Delete",color:"error",onClick:()=>function(e){let t=F.slice();t=t.filter((t=>t!==e)),B(t)}(e),children:Object(P.jsx)(j.a,{children:"clear"})}),Object(P.jsx)("div",{children:e.name},t)]}))):null,Object(P.jsxs)(ee,{children:[Object(P.jsx)("input",{accept:"image/*",className:"input",id:"icon-button-file",multiple:!0,type:"file",onChange:e=>{B([...F,...e.target.files])}}),Object(P.jsx)("label",{htmlFor:"icon-button-file",children:Object(P.jsx)(X,{component:"span",children:"Agregar imagen"})})]})]}),Object(P.jsxs)(m.a,{children:[Object(P.jsx)(O.a,{onClick:z,color:"secondary",children:"Cancelar"}),Object(P.jsx)(O.a,{onClick:function(){if(u.length>0&&b.length>0&&!isNaN(y)&&null!==w&&null!==I){const e=new FormData;e.append("partNumber",u),e.append("code",C),e.append("description",b),e.append("price",y),e.append("idBrand",w._id),e.append("idComponent",I._id),e.append("status",r?1:0);for(let t of F)e.append("productPicture",t);T.a.post("/api/v2/component-detail",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{const n={_id:e.data._id,partNumber:e.data.partNumber,code:e.data.code,description:e.data.description,price:e.data.price,brand:{_id:e.data.idBrand,description:w.description},component:{_id:e.data.idComponent,description:I.description},status:e.data.status,photos:e.data.photos};let i=t.slice();i.unshift(n),console.log(i),a(i),z()}))}else console.log("Completar nombre del item")},color:"primary",children:"Crear"})]})]})]})}var ne=a(37),ie=a(1075),ce=a(1176),re=a.n(ce),le=a(1091),oe=a.n(le),se=a(1177),de=a.n(se);const je=Object(p.a)("div")((e=>{let{theme:t}=e;return{margin:"30px",[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[t.breakpoints.down("sm")]:{marginBottom:"16px"}}}})),be=Object(p.a)("div")((e=>{let{theme:t}=e;return{position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(H.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(H.a)(t.palette.common.white,.25)},marginLeft:0,width:"100%",[t.breakpoints.up("sm")]:{width:"auto"}}})),pe=Object(p.a)("div")((e=>{let{theme:t}=e;return{padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),ue=Object(p.a)(ne.c)((e=>{let{theme:t}=e;return{color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%",[t.breakpoints.up("md")]:{width:"20ch"}}}})),Oe=Object(p.a)("div")((()=>({width:160,display:"flex",justifyContent:"space-between"})));t.default=()=>{const[e,t]=Object(n.useState)([]),[a,i]=Object(n.useState)([]),[c,r]=Object(n.useState)(""),[l,o]=Object(n.useState)("");return Object(n.useEffect)((()=>{T.a.get("/api/v1/component-details").then((e=>{t(e.data),i(e.data)}))}),[]),Object(P.jsxs)(je,{children:[Object(P.jsx)(ae,{items:a,setItems:i}),Object(P.jsxs)(U.l,{title:"Gesti\xf3n de Items",children:[Object(P.jsxs)(Oe,{children:[Object(P.jsxs)(be,{children:[Object(P.jsx)(pe,{children:Object(P.jsx)(re.a,{})}),Object(P.jsx)(ue,{id:"name-search",placeholder:"Filtrar por nombre",inputProps:{"aria-label":"search"},onBlur:e=>{o(e.target.value)}})]}),Object(P.jsxs)(be,{children:[Object(P.jsx)(pe,{children:Object(P.jsx)(re.a,{})}),Object(P.jsx)(ue,{id:"brand-search",placeholder:"Filtrar por marca",inputProps:{"aria-label":"search"},onBlur:e=>{r(e.target.value)}})]}),Object(P.jsx)(ie.a,{title:"Filtrar y buscar",fontSize:"large",children:Object(P.jsx)(d.a,{size:"large","aria-label":"search",color:"primary",onClick:function(){let t=e.slice();t=t.filter((e=>e.description.toLowerCase().includes(l.toLowerCase())&&e.brand.description.toLowerCase().includes(c.toLowerCase()))),i(t)},children:Object(P.jsx)(oe.a,{})})}),Object(P.jsx)(ie.a,{title:"Eliminar filtros",fontSize:"large",children:Object(P.jsx)(d.a,{size:"large","aria-label":"search",color:"primary",onClick:function(){i(e)},children:Object(P.jsx)(de.a,{})})})]}),Object(P.jsx)(G,{items:a,setItems:i})]}),Object(P.jsx)(u.a,{py:"12px"})]})}}}]);